var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function i(t){t.forEach(e)}function s(t){return"function"==typeof t}function r(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function o(t,e,n,i){return t[1]&&i?function(t,e){for(const n in e)t[n]=e[n];return t}(n.ctx.slice(),t[1](i(e))):n.ctx}function l(t,e,n,i,s,r,l){const a=function(t,e,n,i){if(t[2]&&i){const s=t[2](i(n));if(void 0===e.dirty)return s;if("object"==typeof s){const t=[],n=Math.max(e.dirty.length,s.length);for(let i=0;i<n;i+=1)t[i]=e.dirty[i]|s[i];return t}return e.dirty|s}return e.dirty}(e,i,s,r);if(a){const s=o(e,n,i,l);t.p(s,a)}}let a,c=!1;function u(t,e,n,i){for(;t<e;){const s=t+(e-t>>1);n(s)<=i?t=s+1:e=s}return t}function d(t,e){c?(!function(t){if(t.hydrate_init)return;t.hydrate_init=!0;const e=t.childNodes,n=new Int32Array(e.length+1),i=new Int32Array(e.length);n[0]=-1;let s=0;for(let t=0;t<e.length;t++){const r=u(1,s+1,(t=>e[n[t]].claim_order),e[t].claim_order)-1;i[t]=n[r]+1;const o=r+1;n[o]=t,s=Math.max(o,s)}const r=[],o=[];let l=e.length-1;for(let t=n[s]+1;0!=t;t=i[t-1]){for(r.push(e[t-1]);l>=t;l--)o.push(e[l]);l--}for(;l>=0;l--)o.push(e[l]);r.reverse(),o.sort(((t,e)=>t.claim_order-e.claim_order));for(let e=0,n=0;e<o.length;e++){for(;n<r.length&&o[e].claim_order>=r[n].claim_order;)n++;const i=n<r.length?r[n]:null;t.insertBefore(o[e],i)}}(t),(void 0===t.actual_end_child||null!==t.actual_end_child&&t.actual_end_child.parentElement!==t)&&(t.actual_end_child=t.firstChild),e!==t.actual_end_child?t.insertBefore(e,t.actual_end_child):t.actual_end_child=e.nextSibling):e.parentNode!==t&&t.appendChild(e)}function h(t,e,n){c&&!n?d(t,e):(e.parentNode!==t||n&&e.nextSibling!==n)&&t.insertBefore(e,n||null)}function f(t){t.parentNode.removeChild(t)}function g(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function p(t){return document.createElement(t)}function m(t){return document.createTextNode(t)}function v(){return m(" ")}function y(){return m("")}function b(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function $(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function w(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function x(t,e){t.value=null==e?"":e}function _(t,e,n){t.classList[n?"add":"remove"](e)}function C(t){a=t}function k(){const t=function(){if(!a)throw new Error("Function called outside component initialization");return a}();return(e,n)=>{const i=t.$$.callbacks[e];if(i){const s=function(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}(e,n);i.slice().forEach((e=>{e.call(t,s)}))}}}const E=[],I=[],T=[],M=[],A=Promise.resolve();let N=!1;function P(t){T.push(t)}function S(t){M.push(t)}let H=!1;const R=new Set;function j(){if(!H){H=!0;do{for(let t=0;t<E.length;t+=1){const e=E[t];C(e),B(e.$$)}for(C(null),E.length=0;I.length;)I.pop()();for(let t=0;t<T.length;t+=1){const e=T[t];R.has(e)||(R.add(e),e())}T.length=0}while(E.length);for(;M.length;)M.pop()();N=!1,H=!1,R.clear()}}function B(t){if(null!==t.fragment){t.update(),i(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(P)}}const W=new Set;let O;function U(t,e){t&&t.i&&(W.delete(t),t.i(e))}function D(t,e,n,i){if(t&&t.o){if(W.has(t))return;W.add(t),O.c.push((()=>{W.delete(t),i&&(n&&t.d(1),i())})),t.o(e)}}function L(t,e,n){const i=t.$$.props[e];void 0!==i&&(t.$$.bound[i]=n,n(t.$$.ctx[i]))}function z(t){t&&t.c()}function F(t,n,r,o){const{fragment:l,on_mount:a,on_destroy:c,after_update:u}=t.$$;l&&l.m(n,r),o||P((()=>{const n=a.map(e).filter(s);c?c.push(...n):i(n),t.$$.on_mount=[]})),u.forEach(P)}function V(t,e){const n=t.$$;null!==n.fragment&&(i(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Y(t,e){-1===t.$$.dirty[0]&&(E.push(t),N||(N=!0,A.then(j)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Z(e,s,r,o,l,u,d=[-1]){const h=a;C(e);const g=e.$$={fragment:null,ctx:null,props:u,update:t,not_equal:l,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(h?h.$$.context:s.context||[]),callbacks:n(),dirty:d,skip_bound:!1};let p=!1;if(g.ctx=r?r(e,s.props||{},((t,n,...i)=>{const s=i.length?i[0]:n;return g.ctx&&l(g.ctx[t],g.ctx[t]=s)&&(!g.skip_bound&&g.bound[t]&&g.bound[t](s),p&&Y(e,t)),n})):[],g.update(),p=!0,i(g.before_update),g.fragment=!!o&&o(g.ctx),s.target){if(s.hydrate){c=!0;const t=function(t){return Array.from(t.childNodes)}(s.target);g.fragment&&g.fragment.l(t),t.forEach(f)}else g.fragment&&g.fragment.c();s.intro&&U(e.$$.fragment),F(e,s.target,s.anchor,s.customElement),c=!1,j()}C(h)}class q{$destroy(){V(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}
/*! pym.js - v1.3.2 - 2018-02-13 */
var J,G=(function(t){!function(e){t.exports?t.exports=e():window.pym=e.call(this)}((function(){var t="xPYMx",e={},n=function(t){var e=document.createEvent("Event");e.initEvent("pym:"+t,!0,!0),document.dispatchEvent(e)},i=function(t){var e=new RegExp("[\\?&]"+t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]")+"=([^&#]*)").exec(location.search);return null===e?"":decodeURIComponent(e[1].replace(/\+/g," "))},s=function(t,e){if(("*"===e.xdomain||t.origin.match(new RegExp(e.xdomain+"$")))&&"string"==typeof t.data)return!0},r=function(e,n,i){return["pym",e,n,i].join(t)},o=Date.now||function(){return(new Date).getTime()},l=function(){for(var t=e.autoInitInstances.length-1;t>=0;t--){var n=e.autoInitInstances[t];n.el.getElementsByTagName("iframe").length&&n.el.getElementsByTagName("iframe")[0].contentWindow||e.autoInitInstances.splice(t,1)}};return e.autoInitInstances=[],e.autoInit=function(t){var i=document.querySelectorAll("[data-pym-src]:not([data-pym-auto-initialized])"),s=i.length;l();for(var r=0;r<s;++r){var o=i[r];o.setAttribute("data-pym-auto-initialized",""),""===o.id&&(o.id="pym-"+r+"-"+Math.random().toString(36).substr(2,5));var a=o.getAttribute("data-pym-src"),c={xdomain:"string",title:"string",name:"string",id:"string",sandbox:"string",allowfullscreen:"boolean",parenturlparam:"string",parenturlvalue:"string",optionalparams:"boolean",trackscroll:"boolean",scrollwait:"number"},u={};for(var d in c)if(null!==o.getAttribute("data-pym-"+d))switch(c[d]){case"boolean":u[d]=!("false"===o.getAttribute("data-pym-"+d));break;case"string":u[d]=o.getAttribute("data-pym-"+d);break;case"number":var h=Number(o.getAttribute("data-pym-"+d));isNaN(h)||(u[d]=h);break;default:console.err("unrecognized attribute type")}var f=new e.Parent(o.id,a,u);e.autoInitInstances.push(f)}return t||n("pym-initialized"),e.autoInitInstances},e.Parent=function(e,n,i){for(var a in this.id=e,this.url=n,this.el=document.getElementById(e),this.iframe=null,this.settings={xdomain:"*",optionalparams:!0,parenturlparam:"parentUrl",parenturlvalue:window.location.href,trackscroll:!1,scrollwait:100},this.messageRegex=function(e){return new RegExp("^"+["pym",e,"(\\S+)","(.*)"].join(t)+"$")}(this.id),this.messageHandlers={},i=i||{},this._constructIframe=function(){var t=this.el.offsetWidth.toString();this.iframe=document.createElement("iframe");var e="",n=this.url.indexOf("#");for(n>-1&&(e=this.url.substring(n,this.url.length),this.url=this.url.substring(0,n)),this.url.indexOf("?")<0?this.url+="?":this.url+="&",this.iframe.src=this.url+"initialWidth="+t+"&childId="+this.id,this.settings.optionalparams&&(this.iframe.src+="&parentTitle="+encodeURIComponent(document.title),this.iframe.src+="&"+this.settings.parenturlparam+"="+encodeURIComponent(this.settings.parenturlvalue)),this.iframe.src+=e,this.iframe.setAttribute("width","100%"),this.iframe.setAttribute("scrolling","no"),this.iframe.setAttribute("marginheight","0"),this.iframe.setAttribute("frameborder","0"),this.settings.title&&this.iframe.setAttribute("title",this.settings.title),void 0!==this.settings.allowfullscreen&&!1!==this.settings.allowfullscreen&&this.iframe.setAttribute("allowfullscreen",""),void 0!==this.settings.sandbox&&"string"==typeof this.settings.sandbox&&this.iframe.setAttribute("sandbox",this.settings.sandbox),this.settings.id&&(document.getElementById(this.settings.id)||this.iframe.setAttribute("id",this.settings.id)),this.settings.name&&this.iframe.setAttribute("name",this.settings.name);this.el.firstChild;)this.el.removeChild(this.el.firstChild);this.el.appendChild(this.iframe),window.addEventListener("resize",this._onResize),this.settings.trackscroll&&window.addEventListener("scroll",this._throttleOnScroll)},this._onResize=function(){this.sendWidth(),this.settings.trackscroll&&this.sendViewportAndIFramePosition()}.bind(this),this._onScroll=function(){this.sendViewportAndIFramePosition()}.bind(this),this._fire=function(t,e){if(t in this.messageHandlers)for(var n=0;n<this.messageHandlers[t].length;n++)this.messageHandlers[t][n].call(this,e)},this.remove=function(){window.removeEventListener("message",this._processMessage),window.removeEventListener("resize",this._onResize),this.el.removeChild(this.iframe),l()},this._processMessage=function(t){if(s(t,this.settings)&&"string"==typeof t.data){var e=t.data.match(this.messageRegex);if(!e||3!==e.length)return!1;var n=e[1],i=e[2];this._fire(n,i)}}.bind(this),this._onHeightMessage=function(t){var e=parseInt(t);this.iframe.setAttribute("height",e+"px")},this._onNavigateToMessage=function(t){(function(t){if(t.match(/^(?:(?:https?|mailto|ftp):|[^&:/?#]*(?:[/?#]|$))/gi))return!0})(t)&&(document.location.href=t)},this._onScrollToChildPosMessage=function(t){var e=document.getElementById(this.id).getBoundingClientRect().top+window.pageYOffset+parseInt(t);window.scrollTo(0,e)},this.onMessage=function(t,e){t in this.messageHandlers||(this.messageHandlers[t]=[]),this.messageHandlers[t].push(e)},this.sendMessage=function(t,e){this.el.getElementsByTagName("iframe").length&&(this.el.getElementsByTagName("iframe")[0].contentWindow?this.el.getElementsByTagName("iframe")[0].contentWindow.postMessage(r(this.id,t,e),"*"):this.remove())},this.sendWidth=function(){var t=this.el.offsetWidth.toString();this.sendMessage("width",t)},this.sendViewportAndIFramePosition=function(){var t=this.iframe.getBoundingClientRect(),e=(window.innerWidth||document.documentElement.clientWidth)+" "+(window.innerHeight||document.documentElement.clientHeight);e+=" "+t.top+" "+t.left,e+=" "+t.bottom+" "+t.right,this.sendMessage("viewport-iframe-position",e)},i)this.settings[a]=i[a];return this._throttleOnScroll=function(t,e,n){var i,s,r,l=null,a=0;n||(n={});var c=function(){a=!1===n.leading?0:o(),l=null,r=t.apply(i,s),l||(i=s=null)};return function(){var u=o();a||!1!==n.leading||(a=u);var d=e-(u-a);return i=this,s=arguments,d<=0||d>e?(l&&(clearTimeout(l),l=null),a=u,r=t.apply(i,s),l||(i=s=null)):l||!1===n.trailing||(l=setTimeout(c,d)),r}}(this._onScroll.bind(this),this.settings.scrollwait),this.onMessage("height",this._onHeightMessage),this.onMessage("navigateTo",this._onNavigateToMessage),this.onMessage("scrollToChildPos",this._onScrollToChildPosMessage),this.onMessage("parentPositionInfo",this.sendViewportAndIFramePosition),window.addEventListener("message",this._processMessage,!1),this._constructIframe(),this},e.Child=function(t){for(var e in this.parentWidth=null,this.id=null,this.parentTitle=null,this.parentUrl=null,this.settings={renderCallback:null,xdomain:"*",polling:0,parenturlparam:"parentUrl"},this.timerId=null,this.messageRegex=null,this.messageHandlers={},t=t||{},this.onMessage=function(t,e){t in this.messageHandlers||(this.messageHandlers[t]=[]),this.messageHandlers[t].push(e)},this._fire=function(t,e){if(t in this.messageHandlers)for(var n=0;n<this.messageHandlers[t].length;n++)this.messageHandlers[t][n].call(this,e)},this._processMessage=function(t){if(s(t,this.settings)&&"string"==typeof t.data){var e=t.data.match(this.messageRegex);if(e&&3===e.length){var n=e[1],i=e[2];this._fire(n,i)}}}.bind(this),this._onWidthMessage=function(t){var e=parseInt(t);e!==this.parentWidth&&(this.parentWidth=e,this.settings.renderCallback&&this.settings.renderCallback(e),this.sendHeight())},this.sendMessage=function(t,e){window.parent.postMessage(r(this.id,t,e),"*")},this.sendHeight=function(){var t=document.getElementsByTagName("body")[0].offsetHeight.toString();return this.sendMessage("height",t),t}.bind(this),this.getParentPositionInfo=function(){this.sendMessage("parentPositionInfo")},this.scrollParentTo=function(t){this.sendMessage("navigateTo","#"+t)},this.navigateParentTo=function(t){this.sendMessage("navigateTo",t)},this.scrollParentToChildEl=function(t){var e=document.getElementById(t).getBoundingClientRect().top+window.pageYOffset;this.scrollParentToChildPos(e)},this.scrollParentToChildPos=function(t){this.sendMessage("scrollToChildPos",t.toString())},this.remove=function(){window.removeEventListener("message",this._processMessage),this.timerId&&clearInterval(this.timerId)},t)this.settings[e]=t[e];this.id=i("childId")||t.id,this.messageRegex=new RegExp("^pymxPYMx"+this.id+"xPYMx(\\S+)xPYMx(.*)$");var o=parseInt(i("initialWidth"));return this.parentUrl=i(this.settings.parenturlparam),this.parentTitle=i("parentTitle"),this.onMessage("width",this._onWidthMessage),window.addEventListener("message",this._processMessage,!1),this.settings.renderCallback&&this.settings.renderCallback(o),this.sendHeight(),this.settings.polling&&(this.timerId=window.setInterval(this.sendHeight,this.settings.polling)),function(t){var e,i=document.getElementsByTagName("html")[0],s=i.className;try{e=window.self!==window.top?"embedded":"not-embedded"}catch(t){e="embedded"}s.indexOf(e)<0&&(i.className=s?s+" "+e:e,t&&t(e),n("marked-embedded"))}(t.onMarkedEmbeddedStatus),this},"undefined"!=typeof document&&e.autoInit(!0),e}))}(J={exports:{}},J.exports),J.exports);const K="https://bothness.github.io/embed-profile/#/",Q="https://raw.githubusercontent.com/ONSvisual/census-data/main/csv/lists/places_2020.csv",X={population:{label:"Population",options:{}},density:{label:"Density",options:{}},agemed:{label:"Median age",options:{}},age10yr:{label:"Age profile",options:{}},economic:{label:"Economic activity",options:{}},travel:{label:"Travel to work",options:{}}},tt={ew:{name:"",pl:""},wd:{name:"Ward",pl:"Wards"},lad:{name:"District",pl:"Districts"},rgn:{name:"Region",pl:"Regions"},ctry:{name:"Country",pl:"Countries"}};var et={},nt={};function it(t){return new Function("d","return {"+t.map((function(t,e){return JSON.stringify(t)+": d["+e+'] || ""'})).join(",")+"}")}function st(t){var e=Object.create(null),n=[];return t.forEach((function(t){for(var i in t)i in e||n.push(e[i]=i)})),n}function rt(t,e){var n=t+"",i=n.length;return i<e?new Array(e-i+1).join(0)+n:n}function ot(t){var e,n=t.getUTCHours(),i=t.getUTCMinutes(),s=t.getUTCSeconds(),r=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":((e=t.getUTCFullYear())<0?"-"+rt(-e,6):e>9999?"+"+rt(e,6):rt(e,4))+"-"+rt(t.getUTCMonth()+1,2)+"-"+rt(t.getUTCDate(),2)+(r?"T"+rt(n,2)+":"+rt(i,2)+":"+rt(s,2)+"."+rt(r,3)+"Z":s?"T"+rt(n,2)+":"+rt(i,2)+":"+rt(s,2)+"Z":i||n?"T"+rt(n,2)+":"+rt(i,2)+"Z":"")}var lt=function(t){var e=new RegExp('["'+t+"\n\r]"),n=t.charCodeAt(0);function i(t,e){var i,s=[],r=t.length,o=0,l=0,a=r<=0,c=!1;function u(){if(a)return nt;if(c)return c=!1,et;var e,i,s=o;if(34===t.charCodeAt(s)){for(;o++<r&&34!==t.charCodeAt(o)||34===t.charCodeAt(++o););return(e=o)>=r?a=!0:10===(i=t.charCodeAt(o++))?c=!0:13===i&&(c=!0,10===t.charCodeAt(o)&&++o),t.slice(s+1,e-1).replace(/""/g,'"')}for(;o<r;){if(10===(i=t.charCodeAt(e=o++)))c=!0;else if(13===i)c=!0,10===t.charCodeAt(o)&&++o;else if(i!==n)continue;return t.slice(s,e)}return a=!0,t.slice(s,r)}for(10===t.charCodeAt(r-1)&&--r,13===t.charCodeAt(r-1)&&--r;(i=u())!==nt;){for(var d=[];i!==et&&i!==nt;)d.push(i),i=u();e&&null==(d=e(d,l++))||s.push(d)}return s}function s(e,n){return e.map((function(e){return n.map((function(t){return o(e[t])})).join(t)}))}function r(e){return e.map(o).join(t)}function o(t){return null==t?"":t instanceof Date?ot(t):e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,e){var n,s,r=i(t,(function(t,i){if(n)return n(t,i-1);s=t,n=e?function(t,e){var n=it(t);return function(i,s){return e(n(i),s,t)}}(t,e):it(t)}));return r.columns=s||[],r},parseRows:i,format:function(e,n){return null==n&&(n=st(e)),[n.map(o).join(t)].concat(s(e,n)).join("\n")},formatBody:function(t,e){return null==e&&(e=st(t)),s(t,e).join("\n")},formatRows:function(t){return t.map(r).join("\n")},formatRow:r,formatValue:o}}(",").parse;function at(t){for(var e in t){var n,i,s=t[e].trim();if(s)if("true"===s)s=!0;else if("false"===s)s=!1;else if("NaN"===s)s=NaN;else if(isNaN(n=+s)){if(!(i=s.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;ct&&i[4]&&!i[7]&&(s=s.replace(/-/g,"/").replace(/T/," ")),s=new Date(s)}else s=n;else s=null;t[e]=s}return t}const ct=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();function ut(t,e,n){const i=t.slice();return i[32]=e[n],i[35]=e,i[34]=n,i}function dt(t,e,n){const i=t.slice();return i[32]=e[n],i[33]=e,i[34]=n,i}function ht(t){let e,n,i,s,r,o,l,a=(t[0]?t[0]:"Select one")+"";return{c(){e=p("a"),n=p("span"),i=m(a),s=v(),r=p("span"),r.textContent=" ",$(n,"class","svelte-1r1xd93"),$(r,"class","button svelte-1r1xd93"),_(r,"search",t[3]),_(r,"down",!t[3]),$(e,"id","toggle"),$(e,"class","svelte-1r1xd93")},m(a,c){h(a,e,c),d(e,n),d(n,i),d(e,s),d(e,r),o||(l=b(e,"click",t[12]),o=!0)},p(t,e){1&e[0]&&a!==(a=(t[0]?t[0]:"Select one")+"")&&w(i,a),8&e[0]&&_(r,"search",t[3]),8&e[0]&&_(r,"down",!t[3])},d(t){t&&f(e),o=!1,l()}}}function ft(t){let e,n,s,r,o,l,a,c,u=t[6][t[1]]+"",g=t[2]&&gt(t);return{c(){e=p("a"),n=p("span"),s=m(u),r=v(),g&&g.c(),o=v(),l=p("span"),l.textContent=" ",$(n,"class","selection svelte-1r1xd93"),$(l,"class","button close svelte-1r1xd93"),$(e,"id","toggle"),$(e,"class","selected svelte-1r1xd93")},m(i,u){h(i,e,u),d(e,n),d(n,s),d(n,r),g&&g.m(n,null),d(e,o),d(e,l),a||(c=[b(l,"click",t[14]),b(e,"click",t[12])],a=!0)},p(t,e){66&e[0]&&u!==(u=t[6][t[1]]+"")&&w(s,u),t[2]?g?g.p(t,e):(g=gt(t),g.c(),g.m(n,null)):g&&(g.d(1),g=null)},d(t){t&&f(e),g&&g.d(),a=!1,i(c)}}}function gt(t){let e,n,i=t[6][t[2]]+"";return{c(){e=p("small"),n=m(i),$(e,"class","svelte-1r1xd93")},m(t,i){h(t,e,i),d(e,n)},p(t,e){68&e[0]&&i!==(i=t[6][t[2]]+"")&&w(n,i)},d(t){t&&f(e)}}}function pt(t){let e,n,s,r,o,l;function a(t,e){return t[4].length<3?bt:t[9][0]&&t[2]?yt:t[9][0]?vt:mt}let c=a(t),u=c(t);return{c(){var t,i,o;e=p("div"),n=p("input"),s=v(),r=p("ul"),u.c(),$(n,"type","text"),$(n,"placeholder",""),$(n,"autocomplete","false"),$(n,"class","svelte-1r1xd93"),$(r,"class","svelte-1r1xd93"),$(e,"id","dropdown"),t="top",i="0",e.style.setProperty(t,i,o?"important":""),$(e,"class","svelte-1r1xd93")},m(i,a){h(i,e,a),d(e,n),x(n,t[4]),t[23](n),d(e,s),d(e,r),u.m(r,null),t[30](e),o||(l=[b(n,"input",t[22]),b(n,"keyup",t[16])],o=!0)},p(t,e){16&e[0]&&n.value!==t[4]&&x(n,t[4]),c===(c=a(t))&&u?u.p(t,e):(u.d(1),u=c(t),u&&(u.c(),u.m(r,null)))},d(n){n&&f(e),t[23](null),u.d(),t[30](null),o=!1,i(l)}}}function mt(e){let n;return{c(){n=p("li"),n.textContent="No results",$(n,"class","svelte-1r1xd93")},m(t,e){h(t,n,e)},p:t,d(t){t&&f(n)}}}function vt(t){let e,n=t[9],i=[];for(let e=0;e<n.length;e+=1)i[e]=$t(ut(t,n,e));return{c(){for(let t=0;t<i.length;t+=1)i[t].c();e=y()},m(t,n){for(let e=0;e<i.length;e+=1)i[e].m(t,n);h(t,e,n)},p(t,s){if(11010&s[0]){let r;for(n=t[9],r=0;r<n.length;r+=1){const o=ut(t,n,r);i[r]?i[r].p(o,s):(i[r]=$t(o),i[r].c(),i[r].m(e.parentNode,e))}for(;r<i.length;r+=1)i[r].d(1);i.length=n.length}},d(t){g(i,t),t&&f(e)}}}function yt(t){let e,n=t[9],i=[];for(let e=0;e<n.length;e+=1)i[e]=wt(dt(t,n,e));return{c(){for(let t=0;t<i.length;t+=1)i[t].c();e=y()},m(t,n){for(let e=0;e<i.length;e+=1)i[e].m(t,n);h(t,e,n)},p(t,s){if(11014&s[0]){let r;for(n=t[9],r=0;r<n.length;r+=1){const o=dt(t,n,r);i[r]?i[r].p(o,s):(i[r]=wt(o),i[r].c(),i[r].m(e.parentNode,e))}for(;r<i.length;r+=1)i[r].d(1);i.length=n.length}},d(t){g(i,t),t&&f(e)}}}function bt(e){let n;return{c(){n=p("li"),n.textContent="Type a name...",$(n,"class","svelte-1r1xd93")},m(t,e){h(t,n,e)},p:t,d(t){t&&f(n)}}}function $t(t){let e,n,s,r,o,l=t[32][t[1]]+"",a=t[34];function c(){return t[27](t[32])}function u(){return t[28](t[34])}const g=()=>t[29](e,a),y=()=>t[29](null,a);return{c(){e=p("li"),n=m(l),s=v(),$(e,"class","svelte-1r1xd93"),_(e,"highlight",t[8]==t[34])},m(t,i){h(t,e,i),d(e,n),d(e,s),g(),r||(o=[b(e,"click",c),b(e,"mouseover",u)],r=!0)},p(i,s){t=i,514&s[0]&&l!==(l=t[32][t[1]]+"")&&w(n,l),a!==t[34]&&(y(),a=t[34],g()),256&s[0]&&_(e,"highlight",t[8]==t[34])},d(t){t&&f(e),y(),r=!1,i(o)}}}function wt(t){let e,n,s,r,o,l,a,c,u=t[32][t[1]]+"",g=t[32][t[2]]+"",y=t[34];function x(){return t[24](t[32])}function C(){return t[25](t[34])}const k=()=>t[26](e,y),E=()=>t[26](null,y);return{c(){e=p("li"),n=m(u),s=v(),r=p("small"),o=m(g),l=v(),$(r,"class","svelte-1r1xd93"),$(e,"class","svelte-1r1xd93"),_(e,"highlight",t[8]==t[34])},m(t,i){h(t,e,i),d(e,n),d(e,s),d(e,r),d(r,o),d(e,l),k(),a||(c=[b(e,"click",x),b(e,"mouseover",C)],a=!0)},p(i,s){t=i,514&s[0]&&u!==(u=t[32][t[1]]+"")&&w(n,u),516&s[0]&&g!==(g=t[32][t[2]]+"")&&w(o,g),y!==t[34]&&(E(),y=t[34],k()),256&s[0]&&_(e,"highlight",t[8]==t[34])},d(t){t&&f(e),E(),a=!1,i(c)}}}function xt(e){let n,i,s,r;function o(t,e){return t[6]&&!t[3]?ft:ht}let l=o(e),a=l(e),c=e[7]&&pt(e);return{c(){n=p("div"),a.c(),i=v(),c&&c.c(),$(n,"id","select"),$(n,"class","svelte-1r1xd93"),_(n,"active",e[7])},m(t,o){h(t,n,o),a.m(n,null),d(n,i),c&&c.m(n,null),s||(r=b(n,"keydown",e[15]),s=!0)},p(t,e){l===(l=o(t))&&a?a.p(t,e):(a.d(1),a=l(t),a&&(a.c(),a.m(n,i))),t[7]?c?c.p(t,e):(c=pt(t),c.c(),c.m(n,null)):c&&(c.d(1),c=null),128&e[0]&&_(n,"active",t[7])},i:t,o:t,d(t){t&&f(n),a.d(),c&&c.d(),s=!1,r()}}}function _t(t,e,n){let i;const s=k();let r,o,l,{options:a}=e,{selected:c=null}=e,{placeholder:u="Find an area..."}=e,{value:d="code"}=e,{label:h="name"}=e,{group:f=null}=e,{search:g=!1}=e,p=c,m=c?a.find((t=>t[d]==c)):null,v=!1,y="",b=null,$=[];function w(t){n(17,c=t[d]),n(7,v=!1),s("select",{selected:t,value:t[d]})}return t.$$set=t=>{"options"in t&&n(18,a=t.options),"selected"in t&&n(17,c=t.selected),"placeholder"in t&&n(0,u=t.placeholder),"value"in t&&n(19,d=t.value),"label"in t&&n(1,h=t.label),"group"in t&&n(2,f=t.group),"search"in t&&n(3,g=t.search)},t.$$.update=()=>{16&t.$$.dirty[0]&&n(21,i=y?new RegExp(y,"i"):null),2359298&t.$$.dirty[0]&&(n(9,r=i?a.filter((t=>i.test(t[h]))):a),n(8,b=0)),32&t.$$.dirty[0]&&(document.onclick=function(t){t.target!==o&&(n(7,v=!1),n(8,b=0))}),1966080&t.$$.dirty[0]&&p!=c&&(n(6,m=a.find((t=>t[d]==c))),n(20,p=c))},[u,h,f,g,y,o,m,v,b,r,l,$,function(t){var e;t.stopPropagation(),n(4,y=""),n(7,v=!v),(e=10,new Promise((t=>setTimeout(t,e)))).then((()=>{l&&v&&l.focus()}))},w,function(t){t.stopPropagation(),n(17,c=null),n(20,p=null),n(6,m=null),s("select",{selected:null,value:null})},function(t){v&&r[0]&&Number.isInteger(b)&&(38===t.keyCode?(n(8,b-=b>0?1:0),$[b].scrollIntoView({block:"nearest",inline:"start"})):40===t.keyCode&&(n(8,b+=b<r.length-1?1:0),$[b].scrollIntoView({block:"nearest",inline:"end"})))},function(t){r[0]&&Number.isInteger(b)&&13===t.keyCode&&w(r[b])},c,a,d,p,i,function(){y=this.value,n(4,y)},function(t){I[t?"unshift":"push"]((()=>{l=t,n(10,l)}))},t=>w(t),t=>n(8,b=t),function(t,e){I[t?"unshift":"push"]((()=>{$[e]=t,n(11,$)}))},t=>w(t),t=>n(8,b=t),function(t,e){I[t?"unshift":"push"]((()=>{$[e]=t,n(11,$)}))},function(t){I[t?"unshift":"push"]((()=>{o=t,n(5,o)}))}]}class Ct extends q{constructor(t){super(),Z(this,t,_t,xt,r,{options:18,selected:17,placeholder:0,value:19,label:1,group:2,search:3},[-1,-1])}}function kt(t){let e,n,i,s,r,a,c;const u=t[4].default,g=function(t,e,n,i){if(t){const s=o(t,e,n,i);return t[0](s)}}(u,t,t[3],null);return{c(){e=p("div"),n=p("input"),i=v(),s=p("label"),g&&g.c(),$(n,"id",t[1]),$(n,"type","checkbox"),$(n,"class","switch-input svelte-nov6g7"),$(n,"tabindex","0"),$(s,"for",t[1]),$(s,"class","switch-label svelte-nov6g7"),_(s,"mono",t[2]),$(e,"class","switch svelte-nov6g7")},m(o,l){h(o,e,l),d(e,n),n.checked=t[0],d(e,i),d(e,s),g&&g.m(s,null),r=!0,a||(c=b(n,"change",t[5]),a=!0)},p(t,[e]){(!r||2&e)&&$(n,"id",t[1]),1&e&&(n.checked=t[0]),g&&g.p&&(!r||8&e)&&l(g,u,t,t[3],r?e:-1,null,null),(!r||2&e)&&$(s,"for",t[1]),4&e&&_(s,"mono",t[2])},i(t){r||(U(g,t),r=!0)},o(t){D(g,t),r=!1},d(t){t&&f(e),g&&g.d(t),a=!1,c()}}}function Et(t,e,n){let{$$slots:i={},$$scope:s}=e,{id:r="switch"}=e,{mono:o=!1}=e,{checked:l}=e;return t.$$set=t=>{"id"in t&&n(1,r=t.id),"mono"in t&&n(2,o=t.mono),"checked"in t&&n(0,l=t.checked),"$$scope"in t&&n(3,s=t.$$scope)},[l,r,o,s,i,function(){l=this.checked,n(0,l)}]}class It extends q{constructor(t){super(),Z(this,t,Et,kt,r,{id:1,mono:2,checked:0})}}function Tt(t,e,n){const i=t.slice();return i[21]=e[n],i}function Mt(t,e,n){const i=t.slice();return i[21]=e[n],i}function At(t){let e,n,i;function s(e){t[11](e)}let r={options:t[6],group:"typenm"};return void 0!==t[2]&&(r.selected=t[2]),e=new Ct({props:r}),I.push((()=>L(e,"selected",s))),{c(){z(e.$$.fragment)},m(t,n){F(e,t,n),i=!0},p(t,i){const s={};64&i&&(s.options=t[6]),!n&&4&i&&(n=!0,s.selected=t[2],S((()=>n=!1))),e.$set(s)},i(t){i||(U(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){V(e,t)}}}function Nt(t){let e,n,i,s,r,o,l=X[t[21]].label+"";function a(){return t[12](t[21])}return{c(){e=p("div"),n=p("button"),i=m(l),s=v(),$(n,"class","btn svelte-234g7y"),$(n,"prevent",""),_(n,"btn-active",t[1].includes(t[21])),$(e,"class","btn-group svelte-234g7y")},m(t,l){h(t,e,l),d(e,n),d(n,i),d(e,s),r||(o=b(n,"click",a),r=!0)},p(e,i){t=e,130&i&&_(n,"btn-active",t[1].includes(t[21]))},d(t){t&&f(e),r=!1,o()}}}function Pt(t){let e;return{c(){e=m("Include change over time toggle")},m(t,n){h(t,e,n)},d(t){t&&f(e)}}}function St(t){let e;return{c(){e=m("Allow selection of other areas")},m(t,n){h(t,e,n)},d(t){t&&f(e)}}}function Ht(e){let n;return{c(){n=p("span"),n.textContent="No components selected",$(n,"class","muted svelte-234g7y")},m(t,e){h(t,n,e)},p:t,d(t){t&&f(n)}}}function Rt(t){let e,n=t[1],i=[];for(let e=0;e<n.length;e+=1)i[e]=jt(Tt(t,n,e));return{c(){for(let t=0;t<i.length;t+=1)i[t].c();e=y()},m(t,n){for(let e=0;e<i.length;e+=1)i[e].m(t,n);h(t,e,n)},p(t,s){if(770&s){let r;for(n=t[1],r=0;r<n.length;r+=1){const o=Tt(t,n,r);i[r]?i[r].p(o,s):(i[r]=jt(o),i[r].c(),i[r].m(e.parentNode,e))}for(;r<i.length;r+=1)i[r].d(1);i.length=n.length}},d(t){g(i,t),t&&f(e)}}}function jt(t){let e,n,s,r,o,l,a,c,u,g,y=X[t[21]].label+"";function x(){return t[15](t[21])}function _(){return t[16](t[21])}function C(){return t[17](t[21])}return{c(){e=p("div"),n=p("button"),n.textContent="<",s=v(),r=p("button"),o=m(y),l=v(),a=p("button"),a.textContent=">",c=v(),$(n,"class","btn btn-active svelte-234g7y"),$(r,"class","btn btn-active svelte-234g7y"),$(a,"class","btn btn-active svelte-234g7y"),$(e,"class","btn-group svelte-234g7y")},m(t,i){h(t,e,i),d(e,n),d(e,s),d(e,r),d(r,o),d(e,l),d(e,a),d(e,c),u||(g=[b(n,"click",x),b(r,"click",_),b(a,"click",C)],u=!0)},p(e,n){t=e,2&n&&y!==(y=X[t[21]].label+"")&&w(o,y)},d(t){t&&f(e),u=!1,i(g)}}}function Bt(t){let e,n,s,r,o,l,a,c,u,y,b,x,_,C,k,E,T,M,A,N,P,H,R,j,B,W,Y,Z,q,J,G,K,Q,X,tt,et,nt,it,st,rt,ot=`<div id="profile"></div><script src="http://cdn.ons.gov.uk/vendor/pym/1.3.2/pym.min.js"><\/script><script>var pymParent = new pym.Parent("profile", "${t[5]}", {name: "profile"});<\/script>`,lt=t[6]&&At(t),at=t[7],ct=[];for(let e=0;e<at.length;e+=1)ct[e]=Nt(Mt(t,at,e));function ut(e){t[13](e)}let dt={id:"change",$$slots:{default:[Pt]},$$scope:{ctx:t}};function ht(e){t[14](e)}void 0!==t[4]&&(dt.checked=t[4]),M=new It({props:dt}),I.push((()=>L(M,"checked",ut)));let ft={id:"selector",$$slots:{default:[St]},$$scope:{ctx:t}};function gt(t,e){return t[1][0]?Rt:Ht}void 0!==t[3]&&(ft.checked=t[3]),P=new It({props:ft}),I.push((()=>L(P,"checked",ht)));let pt=gt(t),mt=pt(t);return{c(){e=p("header"),e.innerHTML='<div class="col-wide"><h1>Build your area profile</h1></div>',n=v(),s=p("section"),r=p("div"),o=p("h3"),o.textContent="Select your area",l=v(),lt&&lt.c(),a=v(),c=p("section"),u=p("div"),y=p("h3"),y.textContent="Select profile components",b=v(),x=p("div");for(let t=0;t<ct.length;t+=1)ct[t].c();_=v(),C=p("section"),k=p("div"),E=p("h3"),E.textContent="Select options",T=v(),z(M.$$.fragment),N=v(),z(P.$$.fragment),R=v(),j=p("section"),B=p("div"),W=p("h3"),W.textContent="Selected components",Y=v(),Z=p("div"),mt.c(),q=v(),J=p("section"),G=p("div"),K=v(),Q=p("section"),X=p("div"),tt=p("h3"),tt.textContent="Embed code",et=v(),nt=p("div"),it=p("code"),st=m(ot),$(o,"class","svelte-234g7y"),$(r,"class","col-wide"),$(s,"class","svelte-234g7y"),$(y,"class","svelte-234g7y"),$(x,"id","options"),$(x,"class","svelte-234g7y"),$(u,"class","col-wide"),$(c,"class","svelte-234g7y"),$(E,"class","svelte-234g7y"),$(k,"class","col-wide"),$(C,"class","svelte-234g7y"),$(W,"class","svelte-234g7y"),$(Z,"id","selected"),$(Z,"class","svelte-234g7y"),$(B,"class","col-wide"),$(j,"class","svelte-234g7y"),$(G,"id","profile"),$(G,"class","col-wide"),$(J,"class","svelte-234g7y"),$(tt,"class","svelte-234g7y"),$(nt,"id","code"),$(nt,"class","svelte-234g7y"),$(X,"class","col-wide"),$(Q,"class","svelte-234g7y")},m(i,f){h(i,e,f),h(i,n,f),h(i,s,f),d(s,r),d(r,o),d(r,l),lt&&lt.m(r,null),h(i,a,f),h(i,c,f),d(c,u),d(u,y),d(u,b),d(u,x);for(let t=0;t<ct.length;t+=1)ct[t].m(x,null);h(i,_,f),h(i,C,f),d(C,k),d(k,E),d(k,T),F(M,k,null),d(k,N),F(P,k,null),h(i,R,f),h(i,j,f),d(j,B),d(B,W),d(B,Y),d(B,Z),mt.m(Z,null),h(i,q,f),h(i,J,f),d(J,G),t[18](G),h(i,K,f),h(i,Q,f),d(Q,X),d(X,tt),d(X,et),d(X,nt),d(nt,it),d(it,st),rt=!0},p(t,[e]){if(t[6]?lt?(lt.p(t,e),64&e&&U(lt,1)):(lt=At(t),lt.c(),U(lt,1),lt.m(r,null)):lt&&(O={r:0,c:[],p:O},D(lt,1,1,(()=>{lt=null})),O.r||i(O.c),O=O.p),386&e){let n;for(at=t[7],n=0;n<at.length;n+=1){const i=Mt(t,at,n);ct[n]?ct[n].p(i,e):(ct[n]=Nt(i),ct[n].c(),ct[n].m(x,null))}for(;n<ct.length;n+=1)ct[n].d(1);ct.length=at.length}const n={};67108864&e&&(n.$$scope={dirty:e,ctx:t}),!A&&16&e&&(A=!0,n.checked=t[4],S((()=>A=!1))),M.$set(n);const s={};67108864&e&&(s.$$scope={dirty:e,ctx:t}),!H&&8&e&&(H=!0,s.checked=t[3],S((()=>H=!1))),P.$set(s),pt===(pt=gt(t))&&mt?mt.p(t,e):(mt.d(1),mt=pt(t),mt&&(mt.c(),mt.m(Z,null))),(!rt||32&e)&&ot!==(ot=`<div id="profile"></div><script src="http://cdn.ons.gov.uk/vendor/pym/1.3.2/pym.min.js"><\/script><script>var pymParent = new pym.Parent("profile", "${t[5]}", {name: "profile"});<\/script>`)&&w(st,ot)},i(t){rt||(U(lt),U(M.$$.fragment,t),U(P.$$.fragment,t),rt=!0)},o(t){D(lt),D(M.$$.fragment,t),D(P.$$.fragment,t),rt=!1},d(i){i&&f(e),i&&f(n),i&&f(s),lt&&lt.d(),i&&f(a),i&&f(c),g(ct,i),i&&f(_),i&&f(C),V(M),V(P),i&&f(R),i&&f(j),mt.d(),i&&f(q),i&&f(J),t[18](null),i&&f(K),i&&f(Q)}}}function Wt(t,e,n){let i,s,r,o=!1,l=Object.keys(X),a=["population","agemed","age10yr"],c="E07000087",u=!1,d=!1;function h(t){a.includes(t)?n(1,a=a.filter((e=>e!=t))):n(1,a=[...a,t])}function f(t,e){let i=a.indexOf(t)+e;if(i>=0&&i<=a.length-1){let e=a.filter((e=>e!=t));e.splice(i,0,t),n(1,a=e)}}(async function(t){let e=await fetch(t),n=await e.text();return await lt(n,at)})(Q).then((t=>{t.forEach((t=>{t.typepl=tt[t.type].pl,t.typenm=tt[t.type].name})),n(6,r=t.sort(((t,e)=>t.name.localeCompare(e.name))))}));return t.$$.update=()=>{30&t.$$.dirty&&n(5,i=`${K}${c||""}/${u?"select":""}/${d?"change":""}/${a.join(",")}`),1057&t.$$.dirty&&!o&&s&&i&&(new G.Parent("profile",i,{name:"profile"}),n(10,o=!0)),1056&t.$$.dirty&&o&&i&&window.open(i,"profile")},[s,a,c,u,d,i,r,l,h,f,o,function(t){c=t,n(2,c)},t=>h(t),function(t){d=t,n(4,d)},function(t){u=t,n(3,u)},t=>f(t,-1),t=>h(t),t=>f(t,1),function(t){I[t?"unshift":"push"]((()=>{s=t,n(0,s)}))}]}return new class extends q{constructor(t){super(),Z(this,t,Wt,Bt,r,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
