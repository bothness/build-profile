var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function i(t){t.forEach(e)}function s(t){return"function"==typeof t}function r(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function o(t,e,n,i){return t[1]&&i?function(t,e){for(const n in e)t[n]=e[n];return t}(n.ctx.slice(),t[1](i(e))):n.ctx}function l(t,e,n,i,s,r,l){const a=function(t,e,n,i){if(t[2]&&i){const s=t[2](i(n));if(void 0===e.dirty)return s;if("object"==typeof s){const t=[],n=Math.max(e.dirty.length,s.length);for(let i=0;i<n;i+=1)t[i]=e.dirty[i]|s[i];return t}return e.dirty|s}return e.dirty}(e,i,s,r);if(a){const s=o(e,n,i,l);t.p(s,a)}}let a,c=!1;function u(t,e,n,i){for(;t<e;){const s=t+(e-t>>1);n(s)<=i?t=s+1:e=s}return t}function d(t,e){c?(!function(t){if(t.hydrate_init)return;t.hydrate_init=!0;const e=t.childNodes,n=new Int32Array(e.length+1),i=new Int32Array(e.length);n[0]=-1;let s=0;for(let t=0;t<e.length;t++){const r=u(1,s+1,(t=>e[n[t]].claim_order),e[t].claim_order)-1;i[t]=n[r]+1;const o=r+1;n[o]=t,s=Math.max(o,s)}const r=[],o=[];let l=e.length-1;for(let t=n[s]+1;0!=t;t=i[t-1]){for(r.push(e[t-1]);l>=t;l--)o.push(e[l]);l--}for(;l>=0;l--)o.push(e[l]);r.reverse(),o.sort(((t,e)=>t.claim_order-e.claim_order));for(let e=0,n=0;e<o.length;e++){for(;n<r.length&&o[e].claim_order>=r[n].claim_order;)n++;const i=n<r.length?r[n]:null;t.insertBefore(o[e],i)}}(t),(void 0===t.actual_end_child||null!==t.actual_end_child&&t.actual_end_child.parentElement!==t)&&(t.actual_end_child=t.firstChild),e!==t.actual_end_child?t.insertBefore(e,t.actual_end_child):t.actual_end_child=e.nextSibling):e.parentNode!==t&&t.appendChild(e)}function h(t,e,n){c&&!n?d(t,e):(e.parentNode!==t||n&&e.nextSibling!==n)&&t.insertBefore(e,n||null)}function f(t){t.parentNode.removeChild(t)}function p(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function m(t){return document.createElement(t)}function g(t){return document.createTextNode(t)}function v(){return g(" ")}function b(){return g("")}function x(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function w(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function $(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function y(t,e){t.value=null==e?"":e}function C(t,e,n,i){t.style.setProperty(e,n,i?"important":"")}function _(t,e,n){t.classList[n?"add":"remove"](e)}function k(t){a=t}function E(){const t=function(){if(!a)throw new Error("Function called outside component initialization");return a}();return(e,n)=>{const i=t.$$.callbacks[e];if(i){const s=function(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}(e,n);i.slice().forEach((e=>{e.call(t,s)}))}}}const I=[],T=[],M=[],P=[],A=Promise.resolve();let N=!1;function q(t){M.push(t)}function H(t){P.push(t)}let S=!1;const R=new Set;function j(){if(!S){S=!0;do{for(let t=0;t<I.length;t+=1){const e=I[t];k(e),B(e.$$)}for(k(null),I.length=0;T.length;)T.pop()();for(let t=0;t<M.length;t+=1){const e=M[t];R.has(e)||(R.add(e),e())}M.length=0}while(I.length);for(;P.length;)P.pop()();N=!1,S=!1,R.clear()}}function B(t){if(null!==t.fragment){t.update(),i(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(q)}}const W=new Set;let O;function U(t,e){t&&t.i&&(W.delete(t),t.i(e))}function D(t,e,n,i){if(t&&t.o){if(W.has(t))return;W.add(t),O.c.push((()=>{W.delete(t),i&&(n&&t.d(1),i())})),t.o(e)}}function L(t,e,n){const i=t.$$.props[e];void 0!==i&&(t.$$.bound[i]=n,n(t.$$.ctx[i]))}function z(t){t&&t.c()}function F(t,n,r,o){const{fragment:l,on_mount:a,on_destroy:c,after_update:u}=t.$$;l&&l.m(n,r),o||q((()=>{const n=a.map(e).filter(s);c?c.push(...n):i(n),t.$$.on_mount=[]})),u.forEach(q)}function V(t,e){const n=t.$$;null!==n.fragment&&(i(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Y(t,e){-1===t.$$.dirty[0]&&(I.push(t),N||(N=!0,A.then(j)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function G(e,s,r,o,l,u,d=[-1]){const h=a;k(e);const p=e.$$={fragment:null,ctx:null,props:u,update:t,not_equal:l,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(h?h.$$.context:s.context||[]),callbacks:n(),dirty:d,skip_bound:!1};let m=!1;if(p.ctx=r?r(e,s.props||{},((t,n,...i)=>{const s=i.length?i[0]:n;return p.ctx&&l(p.ctx[t],p.ctx[t]=s)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](s),m&&Y(e,t)),n})):[],p.update(),m=!0,i(p.before_update),p.fragment=!!o&&o(p.ctx),s.target){if(s.hydrate){c=!0;const t=function(t){return Array.from(t.childNodes)}(s.target);p.fragment&&p.fragment.l(t),t.forEach(f)}else p.fragment&&p.fragment.c();s.intro&&U(e.$$.fragment),F(e,s.target,s.anchor,s.customElement),c=!1,j()}k(h)}class Z{$destroy(){V(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}
/*! pym.js - v1.3.2 - 2018-02-13 */
var J,K=(function(t){!function(e){t.exports?t.exports=e():window.pym=e.call(this)}((function(){var t="xPYMx",e={},n=function(t){var e=document.createEvent("Event");e.initEvent("pym:"+t,!0,!0),document.dispatchEvent(e)},i=function(t){var e=new RegExp("[\\?&]"+t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]")+"=([^&#]*)").exec(location.search);return null===e?"":decodeURIComponent(e[1].replace(/\+/g," "))},s=function(t,e){if(("*"===e.xdomain||t.origin.match(new RegExp(e.xdomain+"$")))&&"string"==typeof t.data)return!0},r=function(e,n,i){return["pym",e,n,i].join(t)},o=Date.now||function(){return(new Date).getTime()},l=function(){for(var t=e.autoInitInstances.length-1;t>=0;t--){var n=e.autoInitInstances[t];n.el.getElementsByTagName("iframe").length&&n.el.getElementsByTagName("iframe")[0].contentWindow||e.autoInitInstances.splice(t,1)}};return e.autoInitInstances=[],e.autoInit=function(t){var i=document.querySelectorAll("[data-pym-src]:not([data-pym-auto-initialized])"),s=i.length;l();for(var r=0;r<s;++r){var o=i[r];o.setAttribute("data-pym-auto-initialized",""),""===o.id&&(o.id="pym-"+r+"-"+Math.random().toString(36).substr(2,5));var a=o.getAttribute("data-pym-src"),c={xdomain:"string",title:"string",name:"string",id:"string",sandbox:"string",allowfullscreen:"boolean",parenturlparam:"string",parenturlvalue:"string",optionalparams:"boolean",trackscroll:"boolean",scrollwait:"number"},u={};for(var d in c)if(null!==o.getAttribute("data-pym-"+d))switch(c[d]){case"boolean":u[d]=!("false"===o.getAttribute("data-pym-"+d));break;case"string":u[d]=o.getAttribute("data-pym-"+d);break;case"number":var h=Number(o.getAttribute("data-pym-"+d));isNaN(h)||(u[d]=h);break;default:console.err("unrecognized attribute type")}var f=new e.Parent(o.id,a,u);e.autoInitInstances.push(f)}return t||n("pym-initialized"),e.autoInitInstances},e.Parent=function(e,n,i){for(var a in this.id=e,this.url=n,this.el=document.getElementById(e),this.iframe=null,this.settings={xdomain:"*",optionalparams:!0,parenturlparam:"parentUrl",parenturlvalue:window.location.href,trackscroll:!1,scrollwait:100},this.messageRegex=function(e){return new RegExp("^"+["pym",e,"(\\S+)","(.*)"].join(t)+"$")}(this.id),this.messageHandlers={},i=i||{},this._constructIframe=function(){var t=this.el.offsetWidth.toString();this.iframe=document.createElement("iframe");var e="",n=this.url.indexOf("#");for(n>-1&&(e=this.url.substring(n,this.url.length),this.url=this.url.substring(0,n)),this.url.indexOf("?")<0?this.url+="?":this.url+="&",this.iframe.src=this.url+"initialWidth="+t+"&childId="+this.id,this.settings.optionalparams&&(this.iframe.src+="&parentTitle="+encodeURIComponent(document.title),this.iframe.src+="&"+this.settings.parenturlparam+"="+encodeURIComponent(this.settings.parenturlvalue)),this.iframe.src+=e,this.iframe.setAttribute("width","100%"),this.iframe.setAttribute("scrolling","no"),this.iframe.setAttribute("marginheight","0"),this.iframe.setAttribute("frameborder","0"),this.settings.title&&this.iframe.setAttribute("title",this.settings.title),void 0!==this.settings.allowfullscreen&&!1!==this.settings.allowfullscreen&&this.iframe.setAttribute("allowfullscreen",""),void 0!==this.settings.sandbox&&"string"==typeof this.settings.sandbox&&this.iframe.setAttribute("sandbox",this.settings.sandbox),this.settings.id&&(document.getElementById(this.settings.id)||this.iframe.setAttribute("id",this.settings.id)),this.settings.name&&this.iframe.setAttribute("name",this.settings.name);this.el.firstChild;)this.el.removeChild(this.el.firstChild);this.el.appendChild(this.iframe),window.addEventListener("resize",this._onResize),this.settings.trackscroll&&window.addEventListener("scroll",this._throttleOnScroll)},this._onResize=function(){this.sendWidth(),this.settings.trackscroll&&this.sendViewportAndIFramePosition()}.bind(this),this._onScroll=function(){this.sendViewportAndIFramePosition()}.bind(this),this._fire=function(t,e){if(t in this.messageHandlers)for(var n=0;n<this.messageHandlers[t].length;n++)this.messageHandlers[t][n].call(this,e)},this.remove=function(){window.removeEventListener("message",this._processMessage),window.removeEventListener("resize",this._onResize),this.el.removeChild(this.iframe),l()},this._processMessage=function(t){if(s(t,this.settings)&&"string"==typeof t.data){var e=t.data.match(this.messageRegex);if(!e||3!==e.length)return!1;var n=e[1],i=e[2];this._fire(n,i)}}.bind(this),this._onHeightMessage=function(t){var e=parseInt(t);this.iframe.setAttribute("height",e+"px")},this._onNavigateToMessage=function(t){(function(t){if(t.match(/^(?:(?:https?|mailto|ftp):|[^&:/?#]*(?:[/?#]|$))/gi))return!0})(t)&&(document.location.href=t)},this._onScrollToChildPosMessage=function(t){var e=document.getElementById(this.id).getBoundingClientRect().top+window.pageYOffset+parseInt(t);window.scrollTo(0,e)},this.onMessage=function(t,e){t in this.messageHandlers||(this.messageHandlers[t]=[]),this.messageHandlers[t].push(e)},this.sendMessage=function(t,e){this.el.getElementsByTagName("iframe").length&&(this.el.getElementsByTagName("iframe")[0].contentWindow?this.el.getElementsByTagName("iframe")[0].contentWindow.postMessage(r(this.id,t,e),"*"):this.remove())},this.sendWidth=function(){var t=this.el.offsetWidth.toString();this.sendMessage("width",t)},this.sendViewportAndIFramePosition=function(){var t=this.iframe.getBoundingClientRect(),e=(window.innerWidth||document.documentElement.clientWidth)+" "+(window.innerHeight||document.documentElement.clientHeight);e+=" "+t.top+" "+t.left,e+=" "+t.bottom+" "+t.right,this.sendMessage("viewport-iframe-position",e)},i)this.settings[a]=i[a];return this._throttleOnScroll=function(t,e,n){var i,s,r,l=null,a=0;n||(n={});var c=function(){a=!1===n.leading?0:o(),l=null,r=t.apply(i,s),l||(i=s=null)};return function(){var u=o();a||!1!==n.leading||(a=u);var d=e-(u-a);return i=this,s=arguments,d<=0||d>e?(l&&(clearTimeout(l),l=null),a=u,r=t.apply(i,s),l||(i=s=null)):l||!1===n.trailing||(l=setTimeout(c,d)),r}}(this._onScroll.bind(this),this.settings.scrollwait),this.onMessage("height",this._onHeightMessage),this.onMessage("navigateTo",this._onNavigateToMessage),this.onMessage("scrollToChildPos",this._onScrollToChildPosMessage),this.onMessage("parentPositionInfo",this.sendViewportAndIFramePosition),window.addEventListener("message",this._processMessage,!1),this._constructIframe(),this},e.Child=function(t){for(var e in this.parentWidth=null,this.id=null,this.parentTitle=null,this.parentUrl=null,this.settings={renderCallback:null,xdomain:"*",polling:0,parenturlparam:"parentUrl"},this.timerId=null,this.messageRegex=null,this.messageHandlers={},t=t||{},this.onMessage=function(t,e){t in this.messageHandlers||(this.messageHandlers[t]=[]),this.messageHandlers[t].push(e)},this._fire=function(t,e){if(t in this.messageHandlers)for(var n=0;n<this.messageHandlers[t].length;n++)this.messageHandlers[t][n].call(this,e)},this._processMessage=function(t){if(s(t,this.settings)&&"string"==typeof t.data){var e=t.data.match(this.messageRegex);if(e&&3===e.length){var n=e[1],i=e[2];this._fire(n,i)}}}.bind(this),this._onWidthMessage=function(t){var e=parseInt(t);e!==this.parentWidth&&(this.parentWidth=e,this.settings.renderCallback&&this.settings.renderCallback(e),this.sendHeight())},this.sendMessage=function(t,e){window.parent.postMessage(r(this.id,t,e),"*")},this.sendHeight=function(){var t=document.getElementsByTagName("body")[0].offsetHeight.toString();return this.sendMessage("height",t),t}.bind(this),this.getParentPositionInfo=function(){this.sendMessage("parentPositionInfo")},this.scrollParentTo=function(t){this.sendMessage("navigateTo","#"+t)},this.navigateParentTo=function(t){this.sendMessage("navigateTo",t)},this.scrollParentToChildEl=function(t){var e=document.getElementById(t).getBoundingClientRect().top+window.pageYOffset;this.scrollParentToChildPos(e)},this.scrollParentToChildPos=function(t){this.sendMessage("scrollToChildPos",t.toString())},this.remove=function(){window.removeEventListener("message",this._processMessage),this.timerId&&clearInterval(this.timerId)},t)this.settings[e]=t[e];this.id=i("childId")||t.id,this.messageRegex=new RegExp("^pymxPYMx"+this.id+"xPYMx(\\S+)xPYMx(.*)$");var o=parseInt(i("initialWidth"));return this.parentUrl=i(this.settings.parenturlparam),this.parentTitle=i("parentTitle"),this.onMessage("width",this._onWidthMessage),window.addEventListener("message",this._processMessage,!1),this.settings.renderCallback&&this.settings.renderCallback(o),this.sendHeight(),this.settings.polling&&(this.timerId=window.setInterval(this.sendHeight,this.settings.polling)),function(t){var e,i=document.getElementsByTagName("html")[0],s=i.className;try{e=window.self!==window.top?"embedded":"not-embedded"}catch(t){e="embedded"}s.indexOf(e)<0&&(i.className=s?s+" "+e:e,t&&t(e),n("marked-embedded"))}(t.onMarkedEmbeddedStatus),this},"undefined"!=typeof document&&e.autoInit(!0),e}))}(J={exports:{}},J.exports),J.exports);const Q="https://bothness.github.io/embed-profile/#/",X="https://raw.githubusercontent.com/ONSvisual/census-data/main/csv/lists/places_2020.csv",tt={population:{label:"Population"},density:{label:"Density"},sex:{label:"Sex"},health:{label:"General health"},ethnicity:{label:"Ethnicity"},agemed:{label:"Median age"},age10yr:{label:"Age profile"},economic:{label:"Economic activity"},travel:{label:"Travel to work"},tenure:{label:"Housing tenure"}},et={ew:{name:"",pl:""},wd:{name:"Ward",pl:"Wards"},lad:{name:"District",pl:"Districts"},rgn:{name:"Region",pl:"Regions"},ctry:{name:"Country",pl:"Countries"}};var nt={},it={};function st(t){return new Function("d","return {"+t.map((function(t,e){return JSON.stringify(t)+": d["+e+'] || ""'})).join(",")+"}")}function rt(t){var e=Object.create(null),n=[];return t.forEach((function(t){for(var i in t)i in e||n.push(e[i]=i)})),n}function ot(t,e){var n=t+"",i=n.length;return i<e?new Array(e-i+1).join(0)+n:n}function lt(t){var e,n=t.getUTCHours(),i=t.getUTCMinutes(),s=t.getUTCSeconds(),r=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":((e=t.getUTCFullYear())<0?"-"+ot(-e,6):e>9999?"+"+ot(e,6):ot(e,4))+"-"+ot(t.getUTCMonth()+1,2)+"-"+ot(t.getUTCDate(),2)+(r?"T"+ot(n,2)+":"+ot(i,2)+":"+ot(s,2)+"."+ot(r,3)+"Z":s?"T"+ot(n,2)+":"+ot(i,2)+":"+ot(s,2)+"Z":i||n?"T"+ot(n,2)+":"+ot(i,2)+"Z":"")}var at=function(t){var e=new RegExp('["'+t+"\n\r]"),n=t.charCodeAt(0);function i(t,e){var i,s=[],r=t.length,o=0,l=0,a=r<=0,c=!1;function u(){if(a)return it;if(c)return c=!1,nt;var e,i,s=o;if(34===t.charCodeAt(s)){for(;o++<r&&34!==t.charCodeAt(o)||34===t.charCodeAt(++o););return(e=o)>=r?a=!0:10===(i=t.charCodeAt(o++))?c=!0:13===i&&(c=!0,10===t.charCodeAt(o)&&++o),t.slice(s+1,e-1).replace(/""/g,'"')}for(;o<r;){if(10===(i=t.charCodeAt(e=o++)))c=!0;else if(13===i)c=!0,10===t.charCodeAt(o)&&++o;else if(i!==n)continue;return t.slice(s,e)}return a=!0,t.slice(s,r)}for(10===t.charCodeAt(r-1)&&--r,13===t.charCodeAt(r-1)&&--r;(i=u())!==it;){for(var d=[];i!==nt&&i!==it;)d.push(i),i=u();e&&null==(d=e(d,l++))||s.push(d)}return s}function s(e,n){return e.map((function(e){return n.map((function(t){return o(e[t])})).join(t)}))}function r(e){return e.map(o).join(t)}function o(t){return null==t?"":t instanceof Date?lt(t):e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,e){var n,s,r=i(t,(function(t,i){if(n)return n(t,i-1);s=t,n=e?function(t,e){var n=st(t);return function(i,s){return e(n(i),s,t)}}(t,e):st(t)}));return r.columns=s||[],r},parseRows:i,format:function(e,n){return null==n&&(n=rt(e)),[n.map(o).join(t)].concat(s(e,n)).join("\n")},formatBody:function(t,e){return null==e&&(e=rt(t)),s(t,e).join("\n")},formatRows:function(t){return t.map(r).join("\n")},formatRow:r,formatValue:o}}(",").parse;function ct(t){for(var e in t){var n,i,s=t[e].trim();if(s)if("true"===s)s=!0;else if("false"===s)s=!1;else if("NaN"===s)s=NaN;else if(isNaN(n=+s)){if(!(i=s.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;ut&&i[4]&&!i[7]&&(s=s.replace(/-/g,"/").replace(/T/," ")),s=new Date(s)}else s=n;else s=null;t[e]=s}return t}const ut=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();function dt(t,e,n){const i=t.slice();return i[32]=e[n],i[35]=e,i[34]=n,i}function ht(t,e,n){const i=t.slice();return i[32]=e[n],i[33]=e,i[34]=n,i}function ft(t){let e,n,i,s,r,o,l,a=(t[0]?t[0]:"Select one")+"";return{c(){e=m("a"),n=m("span"),i=g(a),s=v(),r=m("span"),r.textContent=" ",w(n,"class","svelte-1r1xd93"),w(r,"class","button svelte-1r1xd93"),_(r,"search",t[3]),_(r,"down",!t[3]),w(e,"id","toggle"),w(e,"class","svelte-1r1xd93")},m(a,c){h(a,e,c),d(e,n),d(n,i),d(e,s),d(e,r),o||(l=x(e,"click",t[12]),o=!0)},p(t,e){1&e[0]&&a!==(a=(t[0]?t[0]:"Select one")+"")&&$(i,a),8&e[0]&&_(r,"search",t[3]),8&e[0]&&_(r,"down",!t[3])},d(t){t&&f(e),o=!1,l()}}}function pt(t){let e,n,s,r,o,l,a,c,u=t[6][t[1]]+"",p=t[2]&&mt(t);return{c(){e=m("a"),n=m("span"),s=g(u),r=v(),p&&p.c(),o=v(),l=m("span"),l.textContent=" ",w(n,"class","selection svelte-1r1xd93"),w(l,"class","button close svelte-1r1xd93"),w(e,"id","toggle"),w(e,"class","selected svelte-1r1xd93")},m(i,u){h(i,e,u),d(e,n),d(n,s),d(n,r),p&&p.m(n,null),d(e,o),d(e,l),a||(c=[x(l,"click",t[14]),x(e,"click",t[12])],a=!0)},p(t,e){66&e[0]&&u!==(u=t[6][t[1]]+"")&&$(s,u),t[2]?p?p.p(t,e):(p=mt(t),p.c(),p.m(n,null)):p&&(p.d(1),p=null)},d(t){t&&f(e),p&&p.d(),a=!1,i(c)}}}function mt(t){let e,n,i=t[6][t[2]]+"";return{c(){e=m("small"),n=g(i),w(e,"class","svelte-1r1xd93")},m(t,i){h(t,e,i),d(e,n)},p(t,e){68&e[0]&&i!==(i=t[6][t[2]]+"")&&$(n,i)},d(t){t&&f(e)}}}function gt(t){let e,n,s,r,o,l;function a(t,e){return t[4].length<3?wt:t[9][0]&&t[2]?xt:t[9][0]?bt:vt}let c=a(t),u=c(t);return{c(){e=m("div"),n=m("input"),s=v(),r=m("ul"),u.c(),w(n,"type","text"),w(n,"placeholder",""),w(n,"autocomplete","false"),w(n,"class","svelte-1r1xd93"),w(r,"class","svelte-1r1xd93"),w(e,"id","dropdown"),C(e,"top","0"),w(e,"class","svelte-1r1xd93")},m(i,a){h(i,e,a),d(e,n),y(n,t[4]),t[23](n),d(e,s),d(e,r),u.m(r,null),t[30](e),o||(l=[x(n,"input",t[22]),x(n,"keyup",t[16])],o=!0)},p(t,e){16&e[0]&&n.value!==t[4]&&y(n,t[4]),c===(c=a(t))&&u?u.p(t,e):(u.d(1),u=c(t),u&&(u.c(),u.m(r,null)))},d(n){n&&f(e),t[23](null),u.d(),t[30](null),o=!1,i(l)}}}function vt(e){let n;return{c(){n=m("li"),n.textContent="No results",w(n,"class","svelte-1r1xd93")},m(t,e){h(t,n,e)},p:t,d(t){t&&f(n)}}}function bt(t){let e,n=t[9],i=[];for(let e=0;e<n.length;e+=1)i[e]=$t(dt(t,n,e));return{c(){for(let t=0;t<i.length;t+=1)i[t].c();e=b()},m(t,n){for(let e=0;e<i.length;e+=1)i[e].m(t,n);h(t,e,n)},p(t,s){if(11010&s[0]){let r;for(n=t[9],r=0;r<n.length;r+=1){const o=dt(t,n,r);i[r]?i[r].p(o,s):(i[r]=$t(o),i[r].c(),i[r].m(e.parentNode,e))}for(;r<i.length;r+=1)i[r].d(1);i.length=n.length}},d(t){p(i,t),t&&f(e)}}}function xt(t){let e,n=t[9],i=[];for(let e=0;e<n.length;e+=1)i[e]=yt(ht(t,n,e));return{c(){for(let t=0;t<i.length;t+=1)i[t].c();e=b()},m(t,n){for(let e=0;e<i.length;e+=1)i[e].m(t,n);h(t,e,n)},p(t,s){if(11014&s[0]){let r;for(n=t[9],r=0;r<n.length;r+=1){const o=ht(t,n,r);i[r]?i[r].p(o,s):(i[r]=yt(o),i[r].c(),i[r].m(e.parentNode,e))}for(;r<i.length;r+=1)i[r].d(1);i.length=n.length}},d(t){p(i,t),t&&f(e)}}}function wt(e){let n;return{c(){n=m("li"),n.textContent="Type a name...",w(n,"class","svelte-1r1xd93")},m(t,e){h(t,n,e)},p:t,d(t){t&&f(n)}}}function $t(t){let e,n,s,r,o,l=t[32][t[1]]+"",a=t[34];function c(){return t[27](t[32])}function u(){return t[28](t[34])}const p=()=>t[29](e,a),b=()=>t[29](null,a);return{c(){e=m("li"),n=g(l),s=v(),w(e,"class","svelte-1r1xd93"),_(e,"highlight",t[8]==t[34])},m(t,i){h(t,e,i),d(e,n),d(e,s),p(),r||(o=[x(e,"click",c),x(e,"mouseover",u)],r=!0)},p(i,s){t=i,514&s[0]&&l!==(l=t[32][t[1]]+"")&&$(n,l),a!==t[34]&&(b(),a=t[34],p()),256&s[0]&&_(e,"highlight",t[8]==t[34])},d(t){t&&f(e),b(),r=!1,i(o)}}}function yt(t){let e,n,s,r,o,l,a,c,u=t[32][t[1]]+"",p=t[32][t[2]]+"",b=t[34];function y(){return t[24](t[32])}function C(){return t[25](t[34])}const k=()=>t[26](e,b),E=()=>t[26](null,b);return{c(){e=m("li"),n=g(u),s=v(),r=m("small"),o=g(p),l=v(),w(r,"class","svelte-1r1xd93"),w(e,"class","svelte-1r1xd93"),_(e,"highlight",t[8]==t[34])},m(t,i){h(t,e,i),d(e,n),d(e,s),d(e,r),d(r,o),d(e,l),k(),a||(c=[x(e,"click",y),x(e,"mouseover",C)],a=!0)},p(i,s){t=i,514&s[0]&&u!==(u=t[32][t[1]]+"")&&$(n,u),516&s[0]&&p!==(p=t[32][t[2]]+"")&&$(o,p),b!==t[34]&&(E(),b=t[34],k()),256&s[0]&&_(e,"highlight",t[8]==t[34])},d(t){t&&f(e),E(),a=!1,i(c)}}}function Ct(e){let n,i,s,r;function o(t,e){return t[6]&&!t[3]?pt:ft}let l=o(e),a=l(e),c=e[7]&&gt(e);return{c(){n=m("div"),a.c(),i=v(),c&&c.c(),w(n,"id","select"),w(n,"class","svelte-1r1xd93"),_(n,"active",e[7])},m(t,o){h(t,n,o),a.m(n,null),d(n,i),c&&c.m(n,null),s||(r=x(n,"keydown",e[15]),s=!0)},p(t,e){l===(l=o(t))&&a?a.p(t,e):(a.d(1),a=l(t),a&&(a.c(),a.m(n,i))),t[7]?c?c.p(t,e):(c=gt(t),c.c(),c.m(n,null)):c&&(c.d(1),c=null),128&e[0]&&_(n,"active",t[7])},i:t,o:t,d(t){t&&f(n),a.d(),c&&c.d(),s=!1,r()}}}function _t(t,e,n){let i;const s=E();let r,o,l,{options:a}=e,{selected:c=null}=e,{placeholder:u="Find an area"}=e,{value:d="code"}=e,{label:h="name"}=e,{group:f=null}=e,{search:p=!1}=e,m=c,g=c?a.find((t=>t[d]==c)):null,v=!1,b="",x=null,w=[];function $(t){n(17,c=t[d]),n(7,v=!1),s("select",{selected:t,value:t[d]})}return t.$$set=t=>{"options"in t&&n(18,a=t.options),"selected"in t&&n(17,c=t.selected),"placeholder"in t&&n(0,u=t.placeholder),"value"in t&&n(19,d=t.value),"label"in t&&n(1,h=t.label),"group"in t&&n(2,f=t.group),"search"in t&&n(3,p=t.search)},t.$$.update=()=>{16&t.$$.dirty[0]&&n(21,i=b?new RegExp(b,"i"):null),2359298&t.$$.dirty[0]&&(n(9,r=i?a.filter((t=>i.test(t[h]))):a),n(8,x=0)),32&t.$$.dirty[0]&&(document.onclick=function(t){t.target!==o&&(n(7,v=!1),n(8,x=0))}),1966080&t.$$.dirty[0]&&m!=c&&(n(6,g=a.find((t=>t[d]==c))),n(20,m=c))},[u,h,f,p,b,o,g,v,x,r,l,w,function(t){var e;t.stopPropagation(),n(4,b=""),n(7,v=!v),(e=10,new Promise((t=>setTimeout(t,e)))).then((()=>{l&&v&&l.focus()}))},$,function(t){t.stopPropagation(),n(17,c=null),n(20,m=null),n(6,g=null),s("select",{selected:null,value:null})},function(t){v&&r[0]&&Number.isInteger(x)&&(38===t.keyCode?(n(8,x-=x>0?1:0),w[x].scrollIntoView({block:"nearest",inline:"start"})):40===t.keyCode&&(n(8,x+=x<r.length-1?1:0),w[x].scrollIntoView({block:"nearest",inline:"end"})))},function(t){r[0]&&Number.isInteger(x)&&13===t.keyCode&&$(r[x])},c,a,d,m,i,function(){b=this.value,n(4,b)},function(t){T[t?"unshift":"push"]((()=>{l=t,n(10,l)}))},t=>$(t),t=>n(8,x=t),function(t,e){T[t?"unshift":"push"]((()=>{w[e]=t,n(11,w)}))},t=>$(t),t=>n(8,x=t),function(t,e){T[t?"unshift":"push"]((()=>{w[e]=t,n(11,w)}))},function(t){T[t?"unshift":"push"]((()=>{o=t,n(5,o)}))}]}class kt extends Z{constructor(t){super(),G(this,t,_t,Ct,r,{options:18,selected:17,placeholder:0,value:19,label:1,group:2,search:3},[-1,-1])}}function Et(t){let e,n,i,s,r,a,c;const u=t[4].default,p=function(t,e,n,i){if(t){const s=o(t,e,n,i);return t[0](s)}}(u,t,t[3],null);return{c(){e=m("div"),n=m("input"),i=v(),s=m("label"),p&&p.c(),w(n,"id",t[1]),w(n,"type","checkbox"),w(n,"class","switch-input svelte-nov6g7"),w(n,"tabindex","0"),w(s,"for",t[1]),w(s,"class","switch-label svelte-nov6g7"),_(s,"mono",t[2]),w(e,"class","switch svelte-nov6g7")},m(o,l){h(o,e,l),d(e,n),n.checked=t[0],d(e,i),d(e,s),p&&p.m(s,null),r=!0,a||(c=x(n,"change",t[5]),a=!0)},p(t,[e]){(!r||2&e)&&w(n,"id",t[1]),1&e&&(n.checked=t[0]),p&&p.p&&(!r||8&e)&&l(p,u,t,t[3],r?e:-1,null,null),(!r||2&e)&&w(s,"for",t[1]),4&e&&_(s,"mono",t[2])},i(t){r||(U(p,t),r=!0)},o(t){D(p,t),r=!1},d(t){t&&f(e),p&&p.d(t),a=!1,c()}}}function It(t,e,n){let{$$slots:i={},$$scope:s}=e,{id:r="switch"}=e,{mono:o=!1}=e,{checked:l}=e;return t.$$set=t=>{"id"in t&&n(1,r=t.id),"mono"in t&&n(2,o=t.mono),"checked"in t&&n(0,l=t.checked),"$$scope"in t&&n(3,s=t.$$scope)},[l,r,o,s,i,function(){l=this.checked,n(0,l)}]}class Tt extends Z{constructor(t){super(),G(this,t,It,Et,r,{id:1,mono:2,checked:0})}}function Mt(t,e,n){const i=t.slice();return i[24]=e[n],i}function Pt(t,e,n){const i=t.slice();return i[24]=e[n],i}function At(t){let e,n,i;function s(e){t[13](e)}let r={options:t[6],group:"typestr"};return void 0!==t[2]&&(r.selected=t[2]),e=new kt({props:r}),T.push((()=>L(e,"selected",s))),{c(){z(e.$$.fragment)},m(t,n){F(e,t,n),i=!0},p(t,i){const s={};64&i&&(s.options=t[6]),!n&&4&i&&(n=!0,s.selected=t[2],H((()=>n=!1))),e.$set(s)},i(t){i||(U(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){V(e,t)}}}function Nt(t){let e,n,i,s,r,o,l=tt[t[24]].label+"";function a(){return t[14](t[24])}return{c(){e=m("div"),n=m("button"),i=g(l),s=v(),w(n,"class","btn svelte-7xqf34"),w(n,"prevent",""),_(n,"btn-active",t[1].includes(t[24])),w(e,"class","btn-group svelte-7xqf34")},m(t,l){h(t,e,l),d(e,n),d(n,i),d(e,s),r||(o=x(n,"click",a),r=!0)},p(e,i){t=e,258&i&&_(n,"btn-active",t[1].includes(t[24]))},d(t){t&&f(e),r=!1,o()}}}function qt(e){let n;return{c(){n=m("span"),n.textContent="No components selected",w(n,"class","muted svelte-7xqf34")},m(t,e){h(t,n,e)},p:t,d(t){t&&f(n)}}}function Ht(t){let e,n=t[1],i=[];for(let e=0;e<n.length;e+=1)i[e]=St(Mt(t,n,e));return{c(){for(let t=0;t<i.length;t+=1)i[t].c();e=b()},m(t,n){for(let e=0;e<i.length;e+=1)i[e].m(t,n);h(t,e,n)},p(t,s){if(1538&s){let r;for(n=t[1],r=0;r<n.length;r+=1){const o=Mt(t,n,r);i[r]?i[r].p(o,s):(i[r]=St(o),i[r].c(),i[r].m(e.parentNode,e))}for(;r<i.length;r+=1)i[r].d(1);i.length=n.length}},d(t){p(i,t),t&&f(e)}}}function St(t){let e,n,s,r,o,l,a,c,u,p,b,y,C=tt[t[24]].label+"";function _(){return t[15](t[24])}function k(){return t[16](t[24])}function E(){return t[17](t[24])}return{c(){e=m("div"),n=m("button"),n.textContent="<",s=v(),r=m("button"),o=g(C),l=v(),a=m("button"),a.textContent="×",c=v(),u=m("button"),u.textContent=">",p=v(),w(n,"class","btn btn-active svelte-7xqf34"),w(r,"class","btn btn-active svelte-7xqf34"),w(a,"class","btn btn-active svelte-7xqf34"),w(u,"class","btn btn-active svelte-7xqf34"),w(e,"class","btn-group svelte-7xqf34")},m(t,i){h(t,e,i),d(e,n),d(e,s),d(e,r),d(r,o),d(e,l),d(e,a),d(e,c),d(e,u),d(e,p),b||(y=[x(n,"click",_),x(a,"click",k),x(u,"click",E)],b=!0)},p(e,n){t=e,2&n&&C!==(C=tt[t[24]].label+"")&&$(o,C)},d(t){t&&f(e),b=!1,i(y)}}}function Rt(t){let e;return{c(){e=g("Include change over time toggle")},m(t,n){h(t,e,n)},d(t){t&&f(e)}}}function jt(t){let e;return{c(){e=g("Allow selection of other areas")},m(t,n){h(t,e,n)},d(t){t&&f(e)}}}function Bt(t){let e;return{c(){e=m("div"),e.textContent="Profile will appear here after you choose an area",w(e,"class","muted svelte-7xqf34"),C(e,"margin-bottom","5px")},m(t,n){h(t,e,n)},d(t){t&&f(e)}}}function Wt(t){let e,n,i,s=`<div id="profile"></div><script src="http://cdn.ons.gov.uk/vendor/pym/1.3.2/pym.min.js"><\/script><script>var pymParent = new pym.Parent("profile", "${t[5]}", {name: "profile"});<\/script>`;return{c(){e=m("div"),n=m("code"),i=g(s),w(e,"id","code"),w(e,"class","svelte-7xqf34")},m(t,s){h(t,e,s),d(e,n),d(n,i)},p(t,e){32&e&&s!==(s=`<div id="profile"></div><script src="http://cdn.ons.gov.uk/vendor/pym/1.3.2/pym.min.js"><\/script><script>var pymParent = new pym.Parent("profile", "${t[5]}", {name: "profile"});<\/script>`)&&$(i,s)},d(t){t&&f(e)}}}function Ot(t){let e,n,s,r,o,l,a,c,u,b,y,C,k,E,I,M,P,A,N,q,S,R,j,B,W,Y,G,Z,J,K,Q,X,tt,et,nt,it,st,rt,ot,lt,at,ct,ut,dt,ht,ft,pt=t[7]?"Hide":"Show",mt=t[6]&&At(t),gt=t[8],vt=[];for(let e=0;e<gt.length;e+=1)vt[e]=Nt(Pt(t,gt,e));function bt(t,e){return t[1][0]?Ht:qt}let xt=bt(t),wt=xt(t);function $t(e){t[18](e)}let yt={id:"change",$$slots:{default:[Rt]},$$scope:{ctx:t}};function Ct(e){t[19](e)}void 0!==t[4]&&(yt.checked=t[4]),R=new Tt({props:yt}),T.push((()=>L(R,"checked",$t)));let _t={id:"selector",$$slots:{default:[jt]},$$scope:{ctx:t}};void 0!==t[3]&&(_t.checked=t[3]),W=new Tt({props:_t}),T.push((()=>L(W,"checked",Ct)));let kt=!t[2]&&Bt(),Et=t[7]&&Wt(t);return{c(){e=m("header"),e.innerHTML='<div class="col-wide"><h1 class="svelte-7xqf34">Build an area profile</h1> \n\t\t<p class="svelte-7xqf34">Choose an area and select topics and options below to build your own custom area profile. Once you&#39;ve built your profile you can either embed it in your own web page or download it as a PNG image.</p></div>',n=v(),s=m("section"),r=m("div"),o=m("h3"),o.textContent="Choose your area",l=v(),mt&&mt.c(),a=v(),c=m("section"),u=m("div"),b=m("h3"),b.textContent="Select topics",y=v(),C=m("div");for(let t=0;t<vt.length;t+=1)vt[t].c();k=v(),E=m("section"),I=m("div"),M=m("h3"),M.textContent="Chosen topics",P=v(),A=m("div"),wt.c(),N=v(),q=m("section"),S=m("div"),z(R.$$.fragment),B=v(),z(W.$$.fragment),G=v(),Z=m("section"),J=m("div"),K=m("h3"),K.textContent="Profile preview",Q=v(),X=m("div"),tt=m("div"),et=v(),kt&&kt.c(),nt=v(),it=m("section"),st=m("div"),rt=m("button"),ot=g(pt),lt=g(" embed code"),at=v(),ct=m("button"),ct.textContent="Download PNG",ut=v(),Et&&Et.c(),w(o,"class","svelte-7xqf34"),w(r,"class","col-wide"),w(s,"class","svelte-7xqf34"),w(b,"class","svelte-7xqf34"),w(C,"id","options"),w(C,"class","svelte-7xqf34"),w(u,"class","col-wide"),w(c,"class","svelte-7xqf34"),w(M,"class","svelte-7xqf34"),w(A,"id","selected"),w(A,"class","svelte-7xqf34"),w(I,"class","col-wide"),w(E,"class","svelte-7xqf34"),w(S,"class","col-wide"),w(q,"class","svelte-7xqf34"),w(K,"class","svelte-7xqf34"),w(tt,"id","profile"),w(tt,"class","svelte-7xqf34"),_(tt,"hidden",!t[2]),w(X,"class","profile svelte-7xqf34"),w(J,"class","col-wide"),w(Z,"class","svelte-7xqf34"),w(rt,"class","btn svelte-7xqf34"),_(rt,"btn-active",!t[7]),w(ct,"class","btn btn-active svelte-7xqf34"),w(st,"class","col-wide"),w(it,"class","svelte-7xqf34")},m(i,f){h(i,e,f),h(i,n,f),h(i,s,f),d(s,r),d(r,o),d(r,l),mt&&mt.m(r,null),h(i,a,f),h(i,c,f),d(c,u),d(u,b),d(u,y),d(u,C);for(let t=0;t<vt.length;t+=1)vt[t].m(C,null);h(i,k,f),h(i,E,f),d(E,I),d(I,M),d(I,P),d(I,A),wt.m(A,null),h(i,N,f),h(i,q,f),d(q,S),F(R,S,null),d(S,B),F(W,S,null),h(i,G,f),h(i,Z,f),d(Z,J),d(J,K),d(J,Q),d(J,X),d(X,tt),t[20](tt),d(X,et),kt&&kt.m(X,null),h(i,nt,f),h(i,it,f),d(it,st),d(st,rt),d(rt,ot),d(rt,lt),d(st,at),d(st,ct),d(st,ut),Et&&Et.m(st,null),dt=!0,ht||(ft=[x(rt,"click",t[21]),x(ct,"click",t[11])],ht=!0)},p(t,[e]){if(t[6]?mt?(mt.p(t,e),64&e&&U(mt,1)):(mt=At(t),mt.c(),U(mt,1),mt.m(r,null)):mt&&(O={r:0,c:[],p:O},D(mt,1,1,(()=>{mt=null})),O.r||i(O.c),O=O.p),770&e){let n;for(gt=t[8],n=0;n<gt.length;n+=1){const i=Pt(t,gt,n);vt[n]?vt[n].p(i,e):(vt[n]=Nt(i),vt[n].c(),vt[n].m(C,null))}for(;n<vt.length;n+=1)vt[n].d(1);vt.length=gt.length}xt===(xt=bt(t))&&wt?wt.p(t,e):(wt.d(1),wt=xt(t),wt&&(wt.c(),wt.m(A,null)));const n={};536870912&e&&(n.$$scope={dirty:e,ctx:t}),!j&&16&e&&(j=!0,n.checked=t[4],H((()=>j=!1))),R.$set(n);const s={};536870912&e&&(s.$$scope={dirty:e,ctx:t}),!Y&&8&e&&(Y=!0,s.checked=t[3],H((()=>Y=!1))),W.$set(s),4&e&&_(tt,"hidden",!t[2]),t[2]?kt&&(kt.d(1),kt=null):kt||(kt=Bt(),kt.c(),kt.m(X,null)),(!dt||128&e)&&pt!==(pt=t[7]?"Hide":"Show")&&$(ot,pt),128&e&&_(rt,"btn-active",!t[7]),t[7]?Et?Et.p(t,e):(Et=Wt(t),Et.c(),Et.m(st,null)):Et&&(Et.d(1),Et=null)},i(t){dt||(U(mt),U(R.$$.fragment,t),U(W.$$.fragment,t),dt=!0)},o(t){D(mt),D(R.$$.fragment,t),D(W.$$.fragment,t),dt=!1},d(r){r&&f(e),r&&f(n),r&&f(s),mt&&mt.d(),r&&f(a),r&&f(c),p(vt,r),r&&f(k),r&&f(E),wt.d(),r&&f(N),r&&f(q),V(R),V(W),r&&f(G),r&&f(Z),t[20](null),kt&&kt.d(),r&&f(nt),r&&f(it),Et&&Et.d(),ht=!1,i(ft)}}}function Ut(t,e,n){let i,s,r,o,l=!1,a=Object.keys(tt),c=!1,u=[],d=null,h=!1,f=!1;function p(t){u.includes(t)?n(1,u=u.filter((e=>e!=t))):n(1,u=[...u,t])}function m(t,e){let i=u.indexOf(t)+e;if(i>=0&&i<=u.length-1){let e=u.filter((e=>e!=t));e.splice(i,0,t),n(1,u=e)}}(async function(t){let e=await fetch(t),n=await e.text();return await at(n,ct)})(X).then((t=>{let e={};t.forEach((t=>e[t.code]=t.name)),t.forEach((t=>{t.typestr=e[t.parent]?`${et[t.type].name} in ${e[t.parent]}`:""})),n(6,o=t.sort(((t,e)=>t.name.localeCompare(e.name))))}));return t.$$.update=()=>{30&t.$$.dirty&&n(5,i=`${Q}${d||""}/${h?"select":""}/${f?"change":""}/${u.join(",")}`),4129&t.$$.dirty&&!l&&r&&i&&(s=new K.Parent("profile",i,{name:"profile",id:"iframe"}),n(12,l=!0)),4128&t.$$.dirty&&l&&i&&window.open(i,"profile")},[r,u,d,h,f,i,o,c,a,p,m,function(){s.sendMessage("makePNG",null)},l,function(t){d=t,n(2,d)},t=>p(t),t=>m(t,-1),t=>p(t),t=>m(t,1),function(t){f=t,n(4,f)},function(t){h=t,n(3,h)},function(t){T[t?"unshift":"push"]((()=>{r=t,n(0,r)}))},()=>n(7,c=!c)]}return new class extends Z{constructor(t){super(),G(this,t,Ut,Ot,r,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
